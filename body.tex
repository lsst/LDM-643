
\section{Introduction}

As LSST DM moves from construction through commissioning and into operations 
a number of rehearsals have been proposed to help prepare for the execution 
of the survey.  Specific rehearsals are outlined in LDM-503 but in the larger 
cases (the OPS Rehearsals LDM 503-09, LDM 503-11, LDM 503-12) the contents of 
that document alone, does not sufficiently outline the scope, content, action 
and interaction that are being rehearsed.  From the software side, LDM-564 
summarizes the DM software features that should be available and helpfully 
identifies those software releases in the context of the rehearsals.  
However, the OPS Rehearsals are not simply periods to test hardware and 
software systems, they are opportunities to understand/develop operations 
processes and to observe the interactions of those hardware/software systems 
and people. 

This document, attempts to outline the OPS Rehearsals in greater detail, 
first because missing/late software features and hardware systems may 
require mitigation (e.g. shims, fake data, etc...) or might be grounds for 
postponement, second because the purpose of an OPS Rehearsal is not to debug 
a freshly deployed system but rather to understand whether that system does
what is needed, and third because the effort to carry out rehearsals will 
require coordination of persons/facilities.  The current draft attempts to 
level set this process for one OPS rehearsal (the first one)


\section{LDM 503-09: Operations Rehearsal \#1 for Commissioning}

\underline{Date:} November 2018

\underline{Original Description:} \begin{quote}
With TBD weeks commissioning pick which parts of plan we could 
rehearse.  Chuck suggests Instrument Signal Removal should be the focus 
of this (or the next rehearsal).
\end{quote}

\underline{Goal:}

Sustained nightly CCD-sized “sampling” mode operations for one week of 
observing.  Archiving and ingestion of raw data, offline processing of 
calibrations and basic image reduction.
\begin{itemize}
\item Use simulated/test-stand AuxTel data (something with expected 
headers, size, and signature).

\item Execute using the as-is: pipeline payload, provenance, and 
production processing and formal file management systems.

\item Roles include (at least) LDF Production Scientist and “Operator,” 
ISci Ops Calibration and ISR Scientists.
\end{itemize}

\underline{Pre-Requisites:}

\begin{itemize}
\item NOTE: the size/scale of the data (I.e. CCD-sized) is important because 
it is not clear that there will be systems (or pipelines) that function at 
any other scale at the time of this rehearsal.  Furthermore, it should be 
considered that any element that uses a fake process will in turn require 
effort to produce the "shim" to fake that action.
\item Requires RAW images and calibrations to feed the system
    \begin{itemize}
    \item Minimum: Can be as simple as a single image for each data type  (that can be replicated to feed the system).
    \item Stretch:  A simulated set of images and base calibrations (e.g. bias/flat)
    \item NOTE: above I have set the size/scale of the data as CCD-sized as this is 
    \end{itemize}
\item Requires a mechanism to feed RAW images into system
\item Requires an endpoint to receive files and messages (that activate processing)
\item Requires a means to gather calibrations and initiate calibration processing when all have arrived
\item Requires a Calibration Pipeline to exercise 
    \begin{itemize}
    \item Minimum: Read files and output a cal (can be as simple as a null... in DES speak null calibrations were files with the right specs but contained constant values, typically 1 or 0 depending whether the calibration was applied multiplicatively or additively)
    \item Stretch: Capable of producing a calibration set (e.g. a rudimentary combined bias/flat)
    \end{itemize}
\item Requires a production pipeline to exercise:
    \begin{itemize}
    \item Minimum: Read incoming files and cals and produce a new output.
    \item Stretch: Actually perform basic ISR on simulated images
    \end{itemize}
\item Requires a service to receive pipeline outputs
\item Requires a base level ability to track/verify outputs are created.  Depending on whether stretch goals are being attempted likely need ability to look at output images (and catalogs?).
\end{itemize}



\underline{Actions:}

\begin{itemize}
\item Assemble proto-ops team; all components from DM into services, with payloads, data sets, configurations, etc. (assumes pre-integration work) -- checklist
\item Mock receive nightly cals and science images, ingest
\item Generate nightly calibrations for ~1 week of observations
\item Run nightly ISR (offline mode) for ~1 week of observations
\item Set up, configure, select calibrations, ingest outputs
\item Generate telemetry that would be returned to Observatory
\item Monitor progress of nightly “campaigns,” characterize and assess, make records of failures, diagnose issues, generate problem backlog.
\item Create mock nightly reports.
\end{itemize}

\underline{Assess:}

\begin{itemize}
\item Was the rehearsal successful? How long did it take? What anomalies/failure modes were identified, and how did we cope? What fixes are needed, and on what timescale (e.g., next ops rehearsal, or we are go for commissioning)? What improvements in procedures, documentation, frameworks, systems, and algorithms were identified?
\item Budget time and effort to plan and execute priority changes and improvements, and plan for next rehearsal.
\end{itemize}


